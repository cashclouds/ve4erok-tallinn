/**
 * ТОЛЬКО СЕГОДНЯ - Ежедневные размышления для выздоравливающих зависимых
 *
 * Этот файл содержит размышления в духе программы Анонимных Наркоманов.
 * Для использования официальных текстов из книги "Только сегодня",
 * замените содержимое массива jftData на оригинальные тексты.
 *
 * Источники официальных текстов:
 * - Книга "Только сегодня" (Just For Today) издательства NA World Services
 * - Сайт na-russia.org
 * - Мобильное приложение "Только сегодня" на русском
 */

// Темы для автоматической генерации размышлений
const themes = [
    {
        title: "Один день за раз",
        quote: "Только сегодня мои мысли будут о моем выздоровлении.",
        text: "Программа учит нас жить один день за раз. Когда мы смотрим слишком далеко вперед, мы теряемся в тревогах о будущем. Когда оглядываемся назад, нас накрывают сожаления о прошлом.\n\nСегодняшний день — это всё, что у нас есть. Прямо сейчас мы можем оставаться чистыми. Прямо сейчас мы можем делать следующий правильный выбор. Наше выздоровление строится день за днем, выбор за выбором.\n\nКогда мы сосредоточены на сегодняшнем дне, жизнь становится управляемой.",
        thought: "Только сегодня я буду оставаться чистым и делать следующий правильный выбор."
    },
    {
        title: "Доверие процессу",
        quote: "Программа работает, если я работаю по ней.",
        text: "Иногда мы хотим увидеть результаты немедленно. Мы нетерпеливы и хотим, чтобы всё изменилось прямо сейчас. Но выздоровление — это процесс, а не событие.\n\nКогда мы доверяем процессу и продолжаем работать по программе, изменения происходят. Возможно, не так быстро, как нам хотелось бы, но они происходят. Мы начинаем замечать маленькие сдвиги в нашем мышлении, чувствах и поведении.\n\nСегодня мы можем довериться программе, которая работала для миллионов зависимых до нас.",
        thought: "Я буду доверять процессу выздоровления и делать то, что мне нужно делать сегодня."
    },
    {
        title: "Принятие",
        quote: "Принятие — это ответ на все мои проблемы сегодня.",
        text: "Мы не можем изменить других людей. Мы не можем изменить прошлое. Мы не можем контролировать будущее. Но мы можем принять реальность такой, какая она есть.\n\nПринятие не значит согласие. Это означает признание того, что есть, без борьбы с реальностью. Когда мы перестаем бороться с тем, что не можем изменить, мы освобождаем энергию для того, чтобы изменить то, что можем — себя.\n\nКогда мы принимаем вещи такими, какие они есть, мы обретаем покой.",
        thought: "Сегодня я буду практиковать принятие того, что не могу изменить."
    },
    {
        title: "Честность",
        quote: "Честность открывает дверь к свободе.",
        text: "Ложь была частью нашей болезни. Мы лгали себе, что контролируем употребление. Мы лгали другим о том, где мы были и что делали. Мы построили целую жизнь на лжи.\n\nВ выздоровлении мы учимся быть честными — сначала с собой, потом с другими. Честность освобождает нас от необходимости помнить, что мы кому сказали. Честность позволяет нам быть собой.\n\nКогда мы честны, мы больше не прячемся. Мы можем показать своё истинное лицо.",
        thought: "Только сегодня я буду практиковать честность во всех своих делах."
    },
    {
        title: "Служение",
        quote: "Мы сохраняем то, что имеем, только отдавая это другим.",
        text: "Когда мы помогаем другому зависимому, мы помогаем себе. Служение — это не просто хороший поступок, это необходимая часть нашего выздоровления.\n\nКогда новичок приходит на собрание, мы видим себя в начале пути. Когда мы делимся своим опытом, мы напоминаем себе, откуда пришли и куда идем. Служение держит нас скромными и благодарными.\n\nКаждый раз, когда мы протягиваем руку помощи, мы укрепляем собственное выздоровление.",
        thought: "Сегодня я найду способ помочь другому зависимому."
    },
    {
        title: "Вера",
        quote: "Вера без дел мертва.",
        text: "Вера — это не просто надежда на лучшее. Вера требует действий. Мы можем верить, что программа работает, но если мы не работаем по ней, ничего не изменится.\n\nНаши действия демонстрируют нашу веру. Когда мы посещаем собрания, работаем с спонсором, помогаем другим — мы показываем, что верим в выздоровление.\n\nВера растет через действие. Каждый раз, когда мы делаем то, что кажется трудным, наша вера укрепляется.",
        thought: "Сегодня я буду действовать в соответствии со своей верой в выздоровление."
    },
    {
        title: "Смирение",
        quote: "Смирение — это не слабость, это честная оценка себя.",
        text: "Смирение было чуждо нам в активном употреблении. Мы либо считали себя хуже всех, либо лучше всех. Наше эго управляло нашими поступками.\n\nВ программе мы учимся смирению. Это не значит унижать себя или считать себя ничтожеством. Смирение — это честная оценка себя, своих возможностей и ограничений.\n\nКогда мы смиренны, мы открыты для обучения. Мы готовы слушать других и принимать помощь.",
        thought: "Сегодня я буду практиковать смирение, признавая, что мне нужна помощь."
    },
    {
        title: "Терпение",
        quote: "Всему своё время. Терпение — это вера в процесс.",
        text: "В активном употреблении мы хотели всего и сразу. Мы не умели ждать. Мы требовали немедленного удовлетворения наших желаний.\n\nВыздоровление учит нас терпению. Изменения не происходят мгновенно. Иногда нам нужно просто продолжать работать программу и доверять, что результаты придут в своё время.\n\nТерпение — это не пассивное ожидание. Это активная работа с верой в то, что всё придет в нужный момент.",
        thought: "Сегодня я буду практиковать терпение, доверяя времени выздоровления."
    },
    {
        title: "Ответственность",
        quote: "Я несу ответственность за своё выздоровление.",
        text: "В активном употреблении мы винили всех и вся в наших проблемах. Родители, друзья, обстоятельства — кто угодно, только не мы.\n\nВ выздоровлении мы берем ответственность за свою жизнь. Мы признаем, что только мы можем изменить себя. Никто не сделает это за нас.\n\nОтветственность — это свобода. Когда мы несем ответственность, мы обретаем силу изменить свою жизнь.",
        thought: "Сегодня я буду нести ответственность за свои выборы и действия."
    },
    {
        title: "Прощение",
        quote: "Прощение освобождает меня от груза прошлого.",
        text: "Обида и злость были нашими постоянными спутниками. Мы держались за старые обиды, как за сокровища. Мы не могли простить тех, кто причинил нам боль.\n\nВ выздоровлении мы учимся прощению. Не потому, что другие заслуживают прощения, а потому что мы заслуживаем свободы от обиды.\n\nКогда мы прощаем, мы освобождаем себя, а не других.",
        thought: "Сегодня я буду работать над прощением, освобождая себя от груза обид."
    },
    {
        title: "Надежда",
        quote: "Надежда — это луч света в темноте.",
        text: "Когда мы пришли в программу, многие из нас потеряли надежду. Мы не верили, что можем жить по-другому. Мы не видели выхода из зависимости.\n\nНо в АН мы встретили людей, которые живут доказательством того, что выздоровление возможно. Их истории дали нам надежду. Их жизни показали нам, что мы тоже можем измениться.\n\nНадежда — это то, что держит нас в программе, когда становится трудно.",
        thought: "Сегодня я буду держаться за надежду, которую дает мне программа."
    },
    {
        title: "Благодарность",
        quote: "Благодарное сердце никогда не употребит.",
        text: "В активном употреблении мы были сосредоточены на том, чего у нас нет. Мы постоянно чувствовали нехватку, пустоту.\n\nВыздоровление учит нас благодарности. Мы начинаем замечать то хорошее, что есть в нашей жизни. Крыша над головой, еда на столе, друзья в сообществе — всё это дары.\n\nБлагодарность меняет наше восприятие жизни. Мы перестаем чувствовать себя жертвами.",
        thought: "Сегодня я найду хотя бы три вещи, за которые я благодарен."
    }
];

// Конкретные размышления для ключевых дат
const jftData = [
    // Январь
    {
        date: "01-01",
        title: "Начать заново",
        quote: "Сегодня новый день. Я никогда раньше его не видел.",
        text: "Каждый новый год приносит с собой надежду на перемены. Для выздоравливающих зависимых каждый день — это возможность начать заново. Не важно, что было вчера. Важно то, что мы делаем сегодня.\n\nВ программе АН мы учимся жить настоящим моментом. Прошлое уже прошло, будущее еще не наступило. У нас есть только сегодня.\n\nНовый год напоминает нам, что всегда можно начать заново.",
        thought: "Я буду использовать сегодняшний день как возможность начать заново."
    },
    {
        date: "01-02",
        title: "Сила сообщества",
        quote: "Вместе мы можем то, что не могли в одиночку.",
        text: "Одиночество было нашим постоянным спутником в активном употреблении. В Анонимных Наркоманах мы обрели сообщество людей, которые понимают нас без слов.\n\nСила нашей программы — в единстве. Когда мы собираемся вместе, делимся своим опытом и поддерживаем друг друга, происходит что-то особенное.",
        thought: "Сегодня я буду помнить, что у меня есть сообщество."
    },
    // Февраль 29 (високосный год)
    {
        date: "02-29",
        title: "Особенный день",
        quote: "Каждый день уникален и ценен.",
        text: "Високосный год напоминает нам, что каждый день уникален. Некоторые дни случаются реже, но каждый день важен для нашего выздоровления.\n\nНе важно, какой сегодня день календаря. Важно, что мы остаемся чистыми.",
        thought: "Сегодня я буду ценить каждый момент как уникальный дар."
    },
    // Декабрь 31
    {
        date: "12-31",
        title: "Завершение года",
        quote: "Мы закончили год чистыми, и это настоящее чудо.",
        text: "Когда год подходит к концу, мы можем оглянуться назад с благодарностью. Многие из нас не верили, что смогут прожить день без наркотиков, а мы прожили целый год.\n\nКаждый день трезвости — это победа. Сегодня мы празднуем чудо выздоровления.",
        thought: "Я благодарен за каждый день трезвости в уходящем году."
    }
];

/**
 * Функция для получения размышления по дате
 * Если для конкретной даты нет записи, генерирует размышление из тем
 */
function getJFTByDate(month, day) {
    const dateKey = `${String(month).padStart(2, '0')}-${String(day).padStart(2, '0')}`;

    // Ищем конкретную запись для этой даты
    const specificEntry = jftData.find(item => item.date === dateKey);

    if (specificEntry) {
        return specificEntry;
    }

    // Если конкретной записи нет, генерируем из тем
    // Используем день года для выбора темы
    const dayOfYear = calculateDayOfYear(month, day);
    const themeIndex = dayOfYear % themes.length;
    const theme = themes[themeIndex];

    return {
        date: dateKey,
        ...theme
    };
}

/**
 * Вспомогательная функция для вычисления дня года
 */
function calculateDayOfYear(month, day) {
    const daysInMonth = [31, 29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
    let dayOfYear = day;

    for (let i = 0; i < month - 1; i++) {
        dayOfYear += daysInMonth[i];
    }

    return dayOfYear;
}

// Экспорт для использования в других скриптах
if (typeof module !== 'undefined' && module.exports) {
    module.exports = { jftData, themes, getJFTByDate };
}
